<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <title>Pixie - Sản phấm</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/tooplate-main.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" type="text/css" href="assets/css/main.css">
<!--
Tooplate 2114 Pixie
https://www.tooplate.com/view/2114-pixie
-->
  </head>

  <body>
    
     <!-- Pre Header -->
    <div id="pre-header">
      <div class="container">
        <div class="row">
          <div class="col-md-12 ">
            <div class="lienhe">
            <span><a href="#">Liên hệ: 0353222581</a></span>
            </div>
            <div class="login">
            <a href="login.html">Đăng Nhập</a>
            </div>
            <div class="cart">
            <a href="shopping-cart.html"><i class="fa fa-shopping-cart cart-icon"></i> Giỏ hàng</a>
            </div>
            <div class="share">
            <form method="get" action="search.html">
            <input type="text" name="timkiem" placeholder="Nhập nội dung" required="">
            <button type="submit" >Tìm kiếm</button>
            </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top">
      <div class="container">
        <div id="logo">
        <!-- <a class="navbar-brand" href="index.html"><img src="assets/images/header-logo.png" alt=""></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button> -->
        </div>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Trang chủ</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="products.html">Sản phẩm
                <span class="sr-only">(current)</span>
              </a>
            </li>
             <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Danh mục
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="danhmuc">
          <!-- <a class="dropdown-item" href="#">Áo</a>
          <a class="dropdown-item" href="#">Quần</a>
          <a class="dropdown-item" href="#">Giày</a>
          <a class="dropdown-item" href="#">Túi</a> -->
        </div>
      </li>
            <li class="nav-item">
              <a class="nav-link" href="news.html">Tin tức</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Liên hệ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <!-- Items Starts Here -->
    <div class="featured-page">
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-12" style="margin-left: -0px;">
            <div class="section-heading" style="width: 570px;">
              <div class="line-dec" style="margin-bottom: 10px"></div>
              
                <form action="">
                  <select name="sapxep" style="height: 30px">
                    <option value="0">Tất cả</option>
                    <option value="1">Tên từ A-Z</option>
                    <option value="2">Tên từ Z-A</option>
                    <option value="3">Giá từ thấp->cao</option>
                    <option value="4">Giá từ cao->thấp</option>
                  </select>
                  <button type="submit" style="height: 30px;">Sắp xếp</button>
                </form>
            
            </div>
          </div>
         <!--  <div class="col-md-8 col-sm-12">
            <div id="filters" class="button-group">
              <button class="btn btn-primary" data-filter="*">Tất cả</button>
              <button class="btn btn-primary" data-filter=".new">Mới nhất</button>
              <button class="btn btn-primary" data-filter=".low">Giá thấp</button>
              <button class="btn btn-primary" data-filter=".high">Giá cao</button>
            </div>
          </div> -->
        </div>
      </div>
    </div>
  
    <div class="container">

        <div class="row" id="sanpham">
           <!--  <div id="1" class="item new col-md-4">
              <a href="single-product.html">
                <div class="featured-item">
                  <img src="assets/images/product-01.jpg" alt="">
                  <h4>Proin vel ligula</h4>
                  <h6>$15.00</h6>
                </div>
              </a>
            </div> -->
        </div>
    </div>

    <div class="page-navigation">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul id="phantrang">
              <!-- <li><a href="file:///C:/Ass2_Thanhnbph07628_WEB206/public/frontend/products.html" id="pages1">1</a></li>
              <li><a href="file:///C:/Ass2_Thanhnbph07628_WEB206/public/frontend/products.html?page=2" id="pages2">2</a></li>
              <li><a href="file:///C:/Ass2_Thanhnbph07628_WEB206/public/frontend/products.html?page=3" id="pages3">3</a></li> -->
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Featred Page Ends Here -->


    <!-- Subscribe Form Starts Here -->
    <div class="subscribe-form">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="section-heading">
              <div class="line-dec"></div>
              <h1>Đăng ký trên PIXIE ngay bây giờ!</h1>
            </div>
          </div>
          <div class="col-md-8 offset-md-2">
            <div class="main-content">
              <p>Godard four dollar toast prism, authentic heirloom raw denim messenger bag gochujang put a bird on it celiac readymade vice.</p>
              <div class="container">
                <form id="subscribe" action="" method="get">
                  <div class="row">
                    <div class="col-md-7">
                      <fieldset>
                        <input name="email" type="text" class="form-control" id="email" 
                        onfocus="if(this.value == 'Your Email...') { this.value = ''; }" 
                    	onBlur="if(this.value == '') { this.value = 'Your Email...';}"
                    	value="Your Email..." required="">
                      </fieldset>
                    </div>
                    <div class="col-md-5">
                      <fieldset>
                        <button type="submit" id="form-submit" class="button">Subscribe Now!</button>
                      </fieldset>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Subscribe Form Ends Here -->


    
    <!-- Footer Starts Here -->
    <div class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="logo">
              <img src="assets/images/header-logo.png" alt="">
            </div>
          </div>
          <div class="col-md-12">
            <div class="footer-menu">
              <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Help</a></li>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">How It Works ?</a></li>
                <li><a href="#">Contact Us</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-12">
            <div class="social-icons">
              <ul>
                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                <li><a href="#"><i class="fa fa-rss"></i></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer Ends Here -->


    <!-- Sub Footer Starts Here -->
    <div class="sub-footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="copyright-text">
              <p>Copyright &copy; 2019 Company Name 
                
                - Design: <a rel="nofollow" href="https://www.facebook.com/tooplate">Tooplate</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Sub Footer Ends Here -->


    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


    <!-- Additional Scripts -->
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/isotope.js"></script>


    <script language = "text/Javascript"> 
      cleared[0] = cleared[1] = cleared[2] = 0; //set a cleared flag for each field
      function clearField(t){                   //declaring the array outside of the
      if(! cleared[t.id]){                      // function makes it static and global
          cleared[t.id] = 1;  // you could use true and false, but that's more typing
          t.value='';         // with more chance of typos
          t.style.color='#fff';
          }
      }
    </script>


 <!-- Show danh mục -->
 <script type="text/javascript">
  var urldanhmuc = "http://localhost:3000/danhmuc/" 
  var datahtml2=""
   fetch(urldanhmuc)
  .then(response => response.json())
  .then(commits => {
    commits.forEach(elements=>{
      datahtml2+=`
          <a class="dropdown-item" href="danhmuc.html?iddm=${elements.id}">${elements.tendm}</a>
      `
    })
    document.querySelector("#danhmuc").innerHTML = datahtml2
  });
 </script>
 
 <!-- Phân trang -->
 <script type="text/javascript">
   /* Hiển thị sản phẩm */
            function GetURLParameter(value) {
                var url = window.location.search.substring(1);
                var url_new = url.split('&');
                for (var i = 0; i < url_new.length; i++) {
                    var url_new2 = url_new[i].split('=');
                    if (url_new2[0] == value) {
                        return url_new2[1];
                    }
                }
            }
            var url = "http://localhost:3000/";
            var url_ht = window.location.href;
            var sapxep = GetURLParameter("sapxep");
            if(sapxep == undefined){
                sapxep = 0;
            }
            console.log(sapxep);
            var page = GetURLParameter("page");
            if(page == undefined){
                page = 1;
            }
            console.log(page);

            /* Phân trang */
            var url_ht2 = url_ht.split('&');
            var url_ht3 = url_ht.split('?');
            console.log(url_ht);
            console.log(url_ht2[0]);
            console.log(url_ht3[0]);
            /* Phân trang */
            if(sapxep == 0){
                document.querySelector("#phantrang").innerHTML = '<li><a href="'+url_ht3[0]+'">1</a></li><li><a href="'+url_ht3[0]+'?page=2">2</a></li><li><a href="'+url_ht3[0]+'?page=3">3</a></li>';
            }else{
                document.querySelector("#phantrang").innerHTML = '<li><a href="'+url_ht2[0]+'">1</a></li><li><a href="'+url_ht2[0]+'&page=2">2</a></li><li><a href="'+url_ht2[0]+'&page=3">3</a></li>';
            }
            /* Kết thúc phân trang */
            if(sapxep == 0){
                var url_sp = url+"sanpham";
                if(page == 1){
                    url_sp = url+"sanpham?_page=1&_limit=6";
                }else if(page == 2){
                    url_sp = url+"sanpham?_page=2&_limit=6";
                }else if(page == 3){
                    url_sp = url+"sanpham?_page=3&_limit=6";
                }
            }else if(sapxep == 2){
                var url_sp = url+"sanpham?_sort=tensp&_order=asc";
                if(page == 1){
                    url_sp = url+"sanpham?_sort=tensp&_order=asc&_page=1&_limit=6";
                }else if(page == 2){
                    url_sp = url+"sanpham?_sort=tensp&_order=asc&_page=2&_limit=6";
                }else if(page == 3){
                    url_sp = url+"sanpham?_sort=tensp&_order=asc&_page=3&_limit=6";
                }
            }else if(sapxep == 1){
                var url_sp = url+"sanpham?_sort=tensp&_order=desc";
                if(page == 1){
                    url_sp = url+"sanpham?_sort=tensp&_order=desc&_page=1&_limit=6";
                }else if(page == 2){
                    url_sp = url+"sanpham?_sort=tensp&_order=desc&_page=2&_limit=6";
                }else if(page == 3){
                    url_sp = url+"sanpham?_sort=tensp&_order=desc&_page=3&_limit=6";
                }
            }else if(sapxep == 3){
                var url_sp = url +"sanpham?_sort=giakm&_order=asc";
                if(page == 1){
                    url_sp = url+"sanpham?_sort=giakm&_order=asc&_page=1&_limit=6";
                }else if(page == 2){
                    url_sp = url+"sanpham?_sort=giakm&_order=asc&_page=2&_limit=6";
                }else if(page == 3){
                    url_sp = url+"sanpham?_sort=giakm&_order=asc&_page=3&_limit=6";
                }
            }else if(sapxep == 4){
                var url_sp = url+"sanpham?_sort=giakm&_order=desc";
                if(page == 1){
                    url_sp = url+"sanpham?_sort=giakm&_order=desc&_page=1&_limit=6";
                }else if(page == 2){
                    url_sp = url+"sanpham?_sort=giakm&_order=desc&_page=2&_limit=6";
                }else if(page == 3){
                    url_sp = url+"sanpham?_sort=giakm&_order=desc&_page=3&_limit=6";
                }
            }
            console.log(url_sp);
            // var dkurl = window.location.href;
            // console.log(dkurl);
            // if(dkurl =="file:///C:/Ass2_Thanhnbph07628_WEB206/public/frontend/products.html"){
            //     var a = document.querySelector("#pages1").innerText;
            //     console.log(a);
            //     var url_sp = "http://localhost:3000/sanpham?_page="+a+"&_limit=6";
            // }else if(dkurl =="file:///C:/Ass2_Thanhnbph07628_WEB206/public/frontend/products.html?page=2"){
            //     var a = document.querySelector("#pages2").innerText;
            //     console.log(a);
            //     var url_sp = "http://localhost:3000/sanpham?_page="+a+"&_limit=6";
            // }
            // else if(dkurl =="file:///C:/Ass2_Thanhnbph07628_WEB206/public/frontend/products.html?page=3"){
            //     var a = document.querySelector("#pages3").innerText;
            //     console.log(a);
            //     var url_sp = "http://localhost:3000/sanpham?_page="+a+"&_limit=6";
            // }

            // console.log(url_sp);

            var urlnewproducts = url_sp;
  var datahtml=""
   fetch(urlnewproducts)
  .then(response => response.json())
  .then(commits => {
    // đoạn này trả về một list chứa các array
    console.log(commits)
    commits.forEach(elements=>{
      // đoạn này là lặp cái list đó thành các phần tử array có trong list
      console.log(elements)
      datahtml+=`
          <div id="1" class="col-md-4" style="margin-left: 0px; margin-right:0px">
              <a href="single-product.html?id=${elements.id}">
                <div class="featured-item">
                  <img with="308px" height="300px" src="${elements.images}" alt="">
                  <h4>${elements.tensp}</h4>
                  <h6><del>Giá: ${elements.giasp} Đ</del></h6>
                  <h5 style="color:red">Sale: ${elements.giakm} Đ</h5>
                </div>
              </a>
            </div>

      `
    })
    document.querySelector("#sanpham").innerHTML = datahtml
  });
            /* Kết thúc hiển thị sản phẩm */
 </script>

<!-- Hiển thị logo -->
 <script type="text/javascript">
  var urlinfologo = "http://localhost:3000/infomation/" 
  var datahtml3=""
   fetch(urlinfologo)
  .then(response => response.json())
  .then(commits => {
    commits.forEach(elements=>{
      datahtml3+=`
          <a class="navbar-brand" href="index.html"><img src="${elements.logo}" alt=""></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      `
    })
    document.querySelector("#logo").innerHTML = datahtml3
  });
 </script>
  </body>

</html>